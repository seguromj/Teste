
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Grand Royale | Elite</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Plus+Jakarta+Sans:wght@400;800&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #d4af37; --bg: #080808; --card: #121212; --border: rgba(212, 175, 55, 0.4); }
        * { margin:0; padding:0; box-sizing:border-box; font-family: 'Plus Jakarta Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: #fff; padding-top: 80px; overflow-x: hidden; }
        
        /* HEADER */
        header { position:fixed; top:0; width:100%; z-index:1000; padding:15px 5%; display:flex; justify-content:space-between; align-items:center; background:rgba(8,8,8,0.95); border-bottom:1px solid var(--border); backdrop-filter: blur(10px); }
        .logo { font-family:'Cinzel'; color:var(--gold); font-size:1.2rem; }
        .cart-btn { background:var(--gold); color:#000; padding:10px 18px; border-radius:50px; font-weight:800; border:none; cursor:pointer; transition: 0.3s; }
        #cart-btn:disabled { opacity: 0.3; cursor: not-allowed; }

        /* CARROSSEL */
        .section-h { padding:20px 5% 0; font-family:'Cinzel'; color:var(--gold); font-size: 1.1rem; }
        .track { display:flex; overflow-x:auto; gap:15px; padding:20px 5%; scroll-snap-type: x mandatory; scrollbar-width:none; }
        .track::-webkit-scrollbar { display: none; }
        
        .card { flex:0 0 260px; background:var(--card); border-radius:20px; border:1px solid var(--border); overflow:hidden; scroll-snap-align: start; }
        .card img { width:100%; height:170px; object-fit:cover; pointer-events: none; }
        .card-c { padding:15px; }
        .price-row { display:flex; justify-content:space-between; align-items:center; margin-top:10px; }
        
        /* BOT√ÉO ADICIONAR - BLINDADO */
        .add-btn { background:var(--gold); border:none; width:45px; height:45px; border-radius:50%; font-size:1.8rem; cursor:pointer; font-weight:bold; display: flex; align-items: center; justify-content: center; z-index: 100; position: relative; }
        .add-btn:active { transform: scale(0.9); }

        /* MODAIS */
        .modal { position:fixed; inset:0; background:rgba(0,0,0,0.98); display:none; justify-content:center; align-items:center; z-index:2000; padding:15px; }
        .modal-c { background:var(--card); width:100%; max-width:450px; border-radius:25px; padding:25px; border:1px solid var(--border); max-height:85vh; overflow-y:auto; }
        
        .cart-item { background:rgba(255,255,255,0.04); padding:15px; border-radius:18px; margin-bottom:12px; border:1px solid #333; }
        .qty-row { display:flex; align-items:center; gap:15px; margin-top:12px; }
        .qty-b { background:none; border:1px solid var(--gold); color:var(--gold); width:32px; height:32px; border-radius:50%; cursor:pointer; font-size: 1.2rem; }
        
        .obs-in { width:100%; background:#000; border:1px solid #444; color:#fff; padding:10px; border-radius:10px; margin-top:10px; display:none; outline: none; }
        .in-p { width:100%; background:#000; border:1px solid var(--border); padding:14px; border-radius:12px; color:#fff; margin-bottom:12px; font-size: 1rem; }
        
        .btn-a { width:100%; background:var(--gold); color:#000; padding:16px; border-radius:14px; border:none; font-weight:800; cursor:pointer; text-transform:uppercase; margin-bottom:10px; font-size: 1rem; }
        .btn-w { width:100%; background:#25d366; color:#fff; padding:16px; border-radius:14px; border:none; font-weight:800; cursor:pointer; margin-bottom:10px; text-transform:uppercase; font-size: 1rem; }
        
        .aviso { font-size:0.8rem; color:#bbb; margin-bottom:15px; line-height: 1.4; border-left: 3px solid var(--gold); padding-left: 10px; }
    </style>
</head>
<body>

<header>
    <div class="logo">Grand Royale</div>
    <button id="cart-btn" class="cart-btn" onclick="openM('m-cart')" disabled>CARRINHO (0)</button>
</header>

<div class="section-h"><h2>Burgers Imperiais</h2></div>
<div class="track">
    <div class="card"><img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400"><div class="card-c"><h3>Gold Truffle</h3><div class="price-row"><span>R$ 45,00</span><button class="add-btn" onclick="add('Gold Truffle', 45)">+</button></div></div></div>
    <div class="card"><img src="https://images.unsplash.com/photo-1594212699903-ec8a3eca50f5?w=400"><div class="card-c"><h3>King Bacon</h3><div class="price-row"><span>R$ 40,00</span><button class="add-btn" onclick="add('King Bacon', 40)">+</button></div></div></div>
    <div class="card"><img src="https://images.unsplash.com/photo-1553979459-d2229ba7433b?w=400"><div class="card-c"><h3>Royal Gorgon</h3><div class="price-row"><span>R$ 42,00</span><button class="add-btn" onclick="add('Royal Gorgon', 42)">+</button></div></div></div>
</div>

<div class="section-h"><h2>Acompanhamentos</h2></div>
<div class="track">
    <div class="card"><img src="https://images.unsplash.com/photo-1573016608244-7d2e073fe955?w=400"><div class="card-c"><h3>Fritas Trufadas</h3><div class="price-row"><span>R$ 22,00</span><button class="add-btn" onclick="add('Fritas Trufadas', 22)">+</button></div></div></div>
    <div class="card"><img src="https://images.unsplash.com/photo-1639129938911-b1a620025740?w=400"><div class="card-c"><h3>Onion Rings</h3><div class="price-row"><span>R$ 18,00</span><button class="add-btn" onclick="add('Onion Rings', 18)">+</button></div></div></div>
</div>

<div id="m-cart" class="modal"><div class="modal-c">
    <h2 style="color:var(--gold); font-family: 'Cinzel'">Seu Pedido</h2><br>
    <div id="c-list"></div><br>
    <h2 id="t-val" style="text-align:right; color: var(--gold)">Total: R$ 0,00</h2><br>
    <button class="btn-a" onclick="openM('m-dev')">Escolher Entrega</button>
    <button onclick="closeM()" style="width:100%; background:none; color:#777; border:none; cursor:pointer; padding: 10px;">Continuar Comprando</button>
</div></div>

<div id="m-dev" class="modal"><div class="modal-c">
    <h2 style="color:var(--gold); font-family: 'Cinzel'">Dados de Entrega</h2><br>
    <select id="mode" class="in-p" onchange="renderF()"><option value="delivery">üöÄ Delivery</option><option value="pickup">üõçÔ∏è Retirada</option><option value="table">üçΩÔ∏è Mesa 3</option></select>
    <div id="f-cont"></div>
    <button class="btn-a" onclick="checkout()">Resumo Final</button>
</div></div>

<div id="m-fin" class="modal"><div class="modal-c">
    <h2 style="color:var(--gold); font-family: 'Cinzel'">Finalizar</h2>
    <div id="res-f" style="margin:20px 0; font-size:0.95rem; border:1px dashed var(--gold); padding:15px; border-radius: 10px;"></div>
    <p class="aviso">Ap√≥s o pagamento, envie seu endere√ßo completo no WhatsApp para iniciarmos a entrega.</p>
    <button class="btn-w" id="w-btn">Enviar no WhatsApp</button>
    <button class="btn-a" id="p-btn">Realizar Pagamento</button>
    <button onclick="closeM()" style="width:100%; background:none; color:#777; border:none; cursor:pointer; padding: 10px;">Voltar</button>
</div></div>

<script>
    let cart = [];
    const links = { "45.00": "https://mpago.la/2YxWyeN", "50.00": "https://mpago.la/18PNJgh", "100.00": "https://mpago.la/14fLE5V" };

    function add(n, p) {
        let item = cart.find(x => x.n === n);
        if(item) { item.q++; } else { cart.push({n, p, q:1, o:""}); }
        save();
        // Feedback visual de clique
        const btn = document.getElementById('cart-btn');
        btn.style.transform = "scale(1.1)";
        setTimeout(() => btn.style.transform = "scale(1)", 200);
    }

    function save() {
        localStorage.setItem('royal_cart_v4', JSON.stringify(cart));
        updUI();
    }

    function updUI() {
        let count = cart.reduce((a, b) => a + b.q, 0);
        const btn = document.getElementById('cart-btn');
        btn.innerText = `CARRINHO (${count})`;
        btn.disabled = count === 0;
        renderC();
    }

    function renderC() {
        const list = document.getElementById('c-list');
        if(!list) return;
        list.innerHTML = cart.map((i, idx) => `
            <div class="cart-item">
                <div style="display:flex; justify-content:space-between; align-items:center"><b>${i.n}</b><button onclick="rem(${idx})" style="background:none; border:none; cursor:pointer; font-size: 1.2rem;">üóëÔ∏è</button></div>
                <div class="qty-row">
                    <button class="qty-b" onclick="chg(${idx},-1)">-</button><span style="font-weight:bold">${i.q}</span><button class="qty-b" onclick="chg(${idx},1)">+</button>
                    <button onclick="tglO(${idx})" style="background:none; border:none; cursor:pointer; font-size: 1.2rem;">‚úèÔ∏è</button>
                </div>
                <input id="o-${idx}" class="obs-in" placeholder="Ex: Sem cebola, ponto da carne..." value="${i.o}" onchange="sObs(${idx},this.value)" style="display:${i.o?'block':'none'}">
            </div>`).join('');
        let total = cart.reduce((a, b) => a + (b.p * b.q), 0) + 5;
        document.getElementById('t-val').innerText = `Total: R$ ${total.toFixed(2).replace('.', ',')}`;
    }

    function chg(i, v) { cart[i].q += v; if(cart[i].q <= 0) cart.splice(i, 1); save(); }
    function rem(i) { cart.splice(i, 1); save(); }
    function tglO(i) { let el = document.getElementById(`o-${i}`); el.style.display = el.style.display === 'none'?'block':'none'; el.focus(); }
    function sObs(i, v) { cart[i].o = v; localStorage.setItem('royal_cart_v4', JSON.stringify(cart)); }

    function openM(id) { 
        document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); 
        document.getElementById(id).style.display = 'flex'; 
        if(id === 'm-dev') renderF();
    }

    function closeM() { document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); }

    function renderF() {
        let m = document.getElementById('mode').value;
        let c = document.getElementById('f-cont');
        let h = `<input id="un" class="in-p" placeholder="Seu Nome">`;
        if(m==='delivery') h += `<input id="ua" class="in-p" placeholder="Seu Endere√ßo">`;
        if(m==='pickup') h += `<input id="uc" class="in-p" placeholder="Seu CPF">`;
        if(m==='table') h += `<input value="Mesa 3 (Fixo)" class="in-p" readonly style="color: var(--gold)">`;
        c.innerHTML = h;
    }

    function checkout() {
        let n = document.getElementById('un').value; if(!n) return alert("Por favor, informe seu nome!");
        let totVal = cart.reduce((a, b) => a + (b.p * b.q), 0) + 5;
        let totStr = totVal.toFixed(2);
        
        let msg = `*PEDIDO GRAND ROYALE*%0A%0A*Cliente:* ${n}%0A%0A*ITENS:*%0A` + cart.map(i => `‚Ä¢ ${i.q}x ${i.n} ${i.o ? `(Obs: ${i.o})`:''}`).join('%0A') + `%0A%0A*TOTAL COM TAXA: R$ ${totStr.replace('.', ',')}*%0A%0A_Aguardando confirma√ß√£o de pagamento..._`;
        
        document.getElementById('res-f').innerHTML = `<b>NOME:</b> ${n.toUpperCase()}<br><br><b>RESUMO:</b><br>${cart.map(i => i.q+'x '+i.n).join('<br>')}<br><br><b>TOTAL: R$ ${totStr.replace('.', ',')}</b>`;
        
        document.getElementById('w-btn').onclick = () => window.open(`https://wa.me/5511999999999?text=${msg}`);
        document.getElementById('p-btn').onclick = () => window.open(links[totStr] || "#");
        openM('m-fin');
    }

    window.onload = () => {
        let saved = localStorage.getItem('royal_cart_v4');
        if(saved) cart = JSON.parse(saved);
        updUI();
    };
</script>
</body>
</html>
