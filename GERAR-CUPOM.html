
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Gerador de Cupons Elegante</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* --- CSS Integrado: Design Moderno --- */
        :root {
            --primary-color: #5d50c6; /* Roxo suave */
            --secondary-color: #2ecc71; /* Verde elegante para copiar */
            --bg-light: #f9fbfe; /* Fundo muito claro */
            --card-bg: #ffffff;
            --text-dark: #333333;
            --text-light: #777777;
            --shadow-subtle: 0 8px 30px rgba(0, 0, 0, 0.08);
            --code-bg: #eef1f6;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-light);
            padding: 40px 20px;
            color: var(--text-dark);
        }

        .container {
            max-width: 950px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 16px;
            box-shadow: var(--shadow-subtle);
        }

        h1 {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
            text-align: center;
            font-size: 21px;
        }
        
        h3 {
            font-weight: 600;
            color: var(--text-dark);
            margin-top: 30px;
            border-left: 4px solid var(--primary-color);
            padding-left: 10px;
            margin-bottom: 10px;
        }

        p {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 5px;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 15px;
            margin-bottom: 25px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 5px rgba(93, 80, 198, 0.2);
        }

        button {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.1s;
        }

        button:hover {
            background-color: #4b429e;
            transform: translateY(-2px);
        }

        hr {
            border: none;
            border-top: 1px solid #eeeeee;
            margin: 30px 0;
        }

        /* Estilo para as √°reas de resultado (Bloco de C√≥digo) */
        pre {
            background-color: var(--code-bg);
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin-top: 10px;
            border: 1px solid #dcdfe4;
        }
        
        .copy-group {
            display: flex;
            justify-content: flex-end; /* Move o bot√£o de copiar para a direita */
            margin-bottom: -15px;
        }

        .copy-btn {
            background-color: var(--secondary-color);
            color: white;
            padding: 8px 15px;
            font-size: 14px;
            font-weight: 400;
        }

        .copy-btn:hover {
            background-color: #27ae60;
        }

        /* Ajuste espec√≠fico para o Campo 2 (Array) para colunas */
        #resultadoArray {
            white-space: pre; /* Garante que os espa√ßos e tabs sejam respeitados */
        }
        /* ---------------------- */
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ú® Gerador de Cupons ‚ú®</h1>
        
         <p>Escreva a palavra que ser√° o **PREFIXO FIXO** para todos os cupons (Ex: MJ, DM, DSD).</p>
         <p>**O Sufixo Aleat√≥rio de 4 caracteres ser√° gerado para garantir a exclusividade.**</p>
        
        <input type="text" id="prefixoInput" placeholder="Ex: FRETE_">
        <button onclick="gerarCupons()">Gerar 248 Cupons (8 Blocos x 31)</button>
        
        <hr>

        <h3><span style="color: var(--secondary-color);">‚ë†</span> CUPONS da Loja (Objeto JSON)</h3>
        <p>üè∑Ô∏è Cont√©m **TODOS** os 248 cupons, com informa√ß√£o de bloco e faixa hor√°ria no coment√°rio.</p>
        <div class="copy-group">
            <button class="copy-btn" onclick="copiarTexto('resultadoObjeto')" id="copiarObjetoBtn" style="display: none;">Copiar</button>
        </div>
        <pre id="resultadoObjeto"></pre>

        <h3><span style="color: var(--secondary-color);">‚ë°</span> CUPONS dos Cadastros (Blocos Array)</h3>
        <p>üè∑Ô∏è Cont√©m os mesmos 248 cupons, divididos em **BLOCK_0** at√© **BLOCK_7** (organizado em colunas).</p>
        <div class="copy-group">
            <button class="copy-btn" onclick="copiarTexto('resultadoArray')" id="copiarArrayBtn" style="display: none;">Copiar</button>
        </div>
        <pre id="resultadoArray"></pre>
    </div>
    
    <script>
        /* --- JAVASCRIPT Integrado (Gera√ß√£o de 248 Cupons Sincronizados) --- */

        // Constante base para a estrutura interna de cada cupom
        const CUPOM_BASE = { 
            type: "frete", 
            value: "FRETE_VALOR_FIXO", 
            minPurchase: 6.00, 
            message: "üéâ Frete Gr√°tis aplicado! O valor de R$5,00 foi removido do total." 
        };

        const COUPONS_PER_BLOCK = 31; // 31 Cupons por bloco
        const TOTAL_BLOCKS = 8;       // Total de blocos (BLOCK_0 a BLOCK_7)
        const SUFFIX_LENGTH = 4;      // Tamanho do sufixo aleat√≥rio
        const TOTAL_COUPONS = COUPONS_PER_BLOCK * TOTAL_BLOCKS; // 248 cupons no total
        const COLUMNS_ARRAY = 5;      // Quantidade de colunas para o Campo 2 (Array)

        // Mapeamento das faixas de hor√°rio para cada bloco
        const BLOCK_TIMES = [
            "(6:00 - 8:59)",   // BLOCK_0
            "(9:00 - 11:59)",  // BLOCK_1
            "(12:00 - 14:59)", // BLOCK_2
            "(15:00 - 17:59)", // BLOCK_3
            "(18:00 - 20:59)", // BLOCK_4
            "(21:00 - 23:59)", // BLOCK_5
            "(00:00 - 02:59)", // BLOCK_6
            "(3:00 - 5:59)"    // BLOCK_7
        ];


        /**
         * Gera uma string aleat√≥ria de letras e n√∫meros (o sufixo).
         */
        function gerarSufixoAleatorio(length) {
            const caracteres = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let sufixo = '';
            for (let i = 0; i < length; i++) {
                sufixo += caracteres.charAt(Math.floor(Math.random() * caracteres.length));
            }
            return sufixo;
        }

        function gerarCupons() {
            // O valor digitado AGORA √© o PREFIXO FIXO
            const prefixoFixo = document.getElementById('prefixoInput').value.trim(); 
            
            const resultadoObjetoDiv = document.getElementById('resultadoObjeto');
            const resultadoArrayDiv = document.getElementById('resultadoArray');
            const copiarObjetoBtn = document.getElementById('copiarObjetoBtn');
            const copiarArrayBtn = document.getElementById('copiarArrayBtn');

            if (!prefixoFixo) {
                resultadoObjetoDiv.textContent = "‚ö†Ô∏è Por favor, digite o prefixo fixo.";
                resultadoArrayDiv.textContent = "";
                copiarObjetoBtn.style.display = 'none';
                copiarArrayBtn.style.display = 'none';
                return;
            }

            const todasAsChaves = [];
            
            // 1. Gera√ß√£o de TODOS os 248 Cupons (Prefixo Fixo + Sufixo Aleat√≥rio)
            for (let i = 0; i < TOTAL_COUPONS; i++) {
                const sufixoAleatorio = gerarSufixoAleatorio(SUFFIX_LENGTH);
                const novaChave = prefixoFixo.toUpperCase() + sufixoAleatorio; 
                todasAsChaves.push(novaChave); 
            }

            // --- 2. Formato CUPONS da Loja (Objeto JSON completo com 248 cupons) ---
            let cuponsGeradosObjeto = "{\n";
            const minPurchaseFormatado = CUPOM_BASE.minPurchase.toFixed(2);

            todasAsChaves.forEach((chave, index) => {
                
                const blockNum = Math.floor(index / COUPONS_PER_BLOCK);
                
                // Adiciona o coment√°rio com o bloco e a faixa de hor√°rio
                if (index % COUPONS_PER_BLOCK === 0) {
                    const blockTime = BLOCK_TIMES[blockNum] || "";
                    cuponsGeradosObjeto += `\n\t// --- IN√çCIO DO BLOCK_${blockNum} --- ${blockTime}\n`;
                }

                // Formato Objeto
                const isLastItem = index === TOTAL_COUPONS - 1;
                // Estrutura do objeto com o novo campo 'bloco'
                cuponsGeradosObjeto += `\t"${chave}": { type: "${CUPOM_BASE.type}", value: ${CUPOM_BASE.value}, minPurchase: ${minPurchaseFormatado}, message: "${CUPOM_BASE.message}", bloco: "BLOCK_${blockNum}"\n\t}${isLastItem ? '' : ','}\n`;
            });
            cuponsGeradosObjeto += "}";


            // --- 3. Formato CUPONS dos Cadastros (Blocos Array com 248 cupons em Colunas) ---
            let cuponsGeradosArray = "";
            
            // Largura m√≠nima do texto do cupom para o alinhamento em colunas (PREFIXO + SUFIXO + 2 aspas + 1 v√≠rgula = 7 a 15)
            // Calcularemos dinamicamente a largura m√°xima de todas as strings de cupons
            const maxKeyLength = todasAsChaves.reduce((max, key) => Math.max(max, key.length), 0);
            const paddingSize = maxKeyLength + 5; // Adiciona margem para aspas e v√≠rgulas

            for(let blockNum = 0; blockNum < TOTAL_BLOCKS; blockNum++) {
                cuponsGeradosArray += `const BLOCK_${blockNum} = [\n`;
                
                const startIndex = blockNum * COUPONS_PER_BLOCK;
                const endIndex = startIndex + COUPONS_PER_BLOCK;
                
                let line = "\t";
                let countInBlock = 0;

                for(let i = startIndex; i < endIndex; i++) {
                    const chave = todasAsChaves[i];
                    const isLastInBlock = i === endIndex - 1; 

                    // Formata a string do cupom
                    let cupomString = `"${chave}"${isLastInBlock ? '' : ','}`;

                    // Aplica padding para alinhamento (apenas se n√£o for o √∫ltimo item da linha)
                    if ((countInBlock + 1) % COLUMNS_ARRAY !== 0) {
                        cupomString = cupomString.padEnd(paddingSize, ' '); 
                    }

                    line += cupomString;
                    countInBlock++;

                    if (countInBlock % COLUMNS_ARRAY === 0 || isLastInBlock) {
                        // Nova linha ou fim do bloco
                        cuponsGeradosArray += line + '\n';
                        line = "\t"; 
                    }
                }
                
                cuponsGeradosArray += `];\n`;

                if (blockNum < TOTAL_BLOCKS - 1) {
                    cuponsGeradosArray += "\n";
                }
            }


            // 4. Exibe os resultados
            resultadoObjetoDiv.textContent = cuponsGeradosObjeto;
            resultadoArrayDiv.textContent = cuponsGeradosArray;

            // 5. Mostra os bot√µes de copiar
            copiarObjetoBtn.style.display = 'block';
            copiarArrayBtn.style.display = 'block';
        }

        function copiarTexto(elementId) {
            const texto = document.getElementById(elementId).textContent;
            
            if (!texto || texto.trim() === '') {
                 alert('‚ùå N√£o h√° texto para copiar. Gere os cupons primeiro.');
                 return;
            }

            navigator.clipboard.writeText(texto)
                .then(() => {
                    // Adiciona feedback visual de sucesso
                    const btn = document.querySelector(`[onclick="copiarTexto('${elementId}')"]`);
                    const originalText = btn.textContent;
                    btn.textContent = '‚úÖ Copiado!';
                    setTimeout(() => {
                        btn.textContent = originalText;
                    }, 2000);
                })
                .catch(err => {
                    console.error('Erro ao copiar texto: ', err);
                    alert('‚ùå Erro ao copiar o texto. Por favor, selecione e copie manualmente.');
                });
        }
        /* ---------------------- */
    </script>
</body>
</html>

